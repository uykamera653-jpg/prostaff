<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>PROSTAFF ‚Äî Firmalar</title>
  <link rel="manifest" href="manifest.json">
  <style>
    :root{--brand:#f59e0b;--ink:#111827;--bg:#fff;--muted:#6b7280;--border:#eee;--card:#f9fafb;--radius:12px}
    *{box-sizing:border-box} body{margin:0;font-family:system-ui,Inter,Segoe UI,Roboto,sans-serif;background:var(--bg);color:var(--ink)}
    header{position:sticky;top:0;background:#fff;border-bottom:1px solid var(--border)}
    .bar{max-width:880px;margin:auto;padding:14px 16px;display:flex;align-items:center;gap:10px}
    .back{text-decoration:none;font-size:22px}.title{font-weight:900}
    main{max-width:880px;margin:18px auto 90px;padding:0 16px}
    .grid{display:grid;gap:12px}@media(min-width:640px){.grid{grid-template-columns:1fr 1fr}}
    .card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:14px}
    .row{display:flex;gap:12px;align-items:center}.logo{font-size:26px}
    .name{font-weight:900}.meta{color:var(--muted);font-size:13px}
    .btn{margin-top:10px;display:inline-block;background:var(--brand);color:#fff;padding:10px 12px;border-radius:10px;text-decoration:none;font-weight:800}
    dialog{width:min(720px,96vw);border:0;border-radius:14px;padding:0;overflow:hidden}
    dialog::backdrop{background:rgb(0 0 0 / .35)}
    .modal-h{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid var(--border);background:#fff}
    .modal-b{padding:14px;background:#fff}.x{border:0;background:transparent;font-size:22px;cursor:pointer}
    nav{position:fixed;left:0;right:0;bottom:0;background:#fff;border-top:1px solid var(--border)}
    .tabs{max-width:880px;margin:auto;display:flex;justify-content:space-around;padding:10px 8px}
    .tab{display:flex;flex-direction:column;align-items:center;gap:6px;color:#6b7280;text-decoration:none;font-size:12px}
    .tab .i{font-size:22px}.tab.active{color:#111827;font-weight:800}
  </style>
</head>
<body>
  <header>
    <div class="bar">
      <a class="back" href="index.html">‚Üê</a>
      <div class="title">Xizmat ko‚Äòrsatish firmalari</div>
    </div>
  </header>

  <main>
    <div id="list" class="grid"></div>
  </main>

  <dialog id="dlg">
    <div class="modal-h">
      <div id="dlgTitle" class="name"></div>
      <button class="x" onclick="dlg.close()">√ó</button>
    </div>
    <div id="dlgBody" class="modal-b"></div>
  </dialog>

  <nav>
    <div class="tabs">
      <a class="tab" href="index.html"><span class="i">üè†</span><span>Bosh</span></a>
      <a class="tab" href="workers.html"><span class="i">üë∑</span><span>Ishchi</span></a>
      <a class="tab active" href="firms.html"><span class="i">üè¢</span><span>Firma</span></a>
      <a class="tab" href="workers.html#my"><span class="i">üì¨</span><span>Takliflar</span></a>
    </div>
  </nav>

  <script>
    const firms = [
      {name:'CleanPro LLC', cat:'Tozalash', city:'Toshkent', price:'450 000 / xona', rate:'4.9', about:'Professional tozalash: uy/ofis, remontdan keyin', photos:['üßπ','üßΩ','ü™ü']},
      {name:'Usta+ M', cat:'Ta‚Äômirlash', city:'Toshkent', price:'Kelishiladi', rate:'4.7', about:'Elektrik, santexnik, mebel yig‚Äòish', photos:['üîß','ü™ö','üß±']},
      {name:'YukTaxi 24/7', cat:'Ko‚Äòchirish', city:'Toshkent', price:'120 000 / soat', rate:'4.8', about:'Gazel + brigada, qadoqlash', photos:['üöö','üì¶','üè†']}
    ];

    const $ = s=>document.querySelector(s);
    const list = $('#list'), dlg=$('#dlg'), t=$('#dlgTitle'), b=$('#dlgBody');

    firms.forEach((f,i)=>{
      const el=document.createElement('div'); el.className='card';
      el.innerHTML = `
        <div class="row">
          <div class="logo">üè¢</div>
          <div>
            <div class="name">${f.name}</div>
            <div class="meta">${f.cat} ‚Ä¢ ${f.city} ‚Ä¢ ‚≠ê ${f.rate}</div>
            <div class="meta">${f.price}</div>
            <a class="btn" href="#" onclick="openFirm(${i});return false;">Profil</a>
          </div>
        </div>`;
      list.appendChild(el);
    });

    window.openFirm = (i)=>{
      const f=firms[i];
      t.textContent=f.name;
      b.innerHTML = `
        <div class="meta">${f.cat} ‚Ä¢ ${f.city} ‚Ä¢ ‚≠ê ${f.rate}</div>
        <p style="margin:10px 0 6px">${f.about}</p>
        <div style="display:flex;gap:8px;margin:8px 0 14px">
          ${f.photos.map(p=>`<div style="font-size:34px">${p}</div>`).join('')}
        </div>
        <a class="btn" href="workers.html">Buyurtma berish</a>
      `;
      dlg.showModal();
    };

    // Always-fresh SW
    if ('serviceWorker' in navigator) {
      const v = Date.now();
      navigator.serviceWorker.getRegistrations()
        .then(rs => Promise.all(rs.map(r => r.unregister())))
        .then(() => navigator.serviceWorker.register('service-worker.js?v=' + v, {scope: './'}))
        .catch(()=>{});
    }
  </script>
</body>
</html>
